<% include ../partials/header %>

<div class="text-center">
    <h1 class="text-center">User List (<%= users.length %> found)</h1>
</div>
<div class="row justify-content-center text-center">
    <div class="col-6">
        <form action="/users" method="GET">
            <div class="form-group">
                <input class="form-control" type="search" placeholder="Search Usernames" name="search">
            </div>
            <div class="form-group">
                <button class="btn btn-primary" type="submit">Search</button>
                <button class="btn btn-primary" href="/users/">Reset</button>
            </div>
        </form>
    </div>
</div>
<div class="row text-center">
    <div class="col-12">
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col">Username</th>
                    <th scope="col">Role</th>
                    <th scope="col">Joined</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(function(user) { %>
                    <tr>
                        <th scope="row"><a href="/users/<%= user._id %>"><%= user.username %></a></th>
                        <td>
                            <% if(user.isAdmin) { %>
                                Admin
                            <% } else { %>
                                User
                            <% } %>
                        </td>
                        <td><%= moment(user.createdAt).calendar() %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</div>

<% include ../partials/footer %>